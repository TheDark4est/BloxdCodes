# é£äº‘é™…ä¼š
> æœåŠ¡å™¨æºä»£ç  2025/11/15
> 
> å²å±±ï¼Œæ¬¢è¿æ”¹è¿›ã€‚ä¸ºä¿æŠ¤åŠ³åŠ¨ï¼Œé¼“åŠ±åˆ›æ–°ï¼Œåœ¨å…¶ä»–æœè½¬è½½è¯·æ³¨æ˜æ¥æºã€‚

```js
/*
    * æœ¬ä»£ç ç”±The_DarkForestç¼–å†™ï¼Œè½¬è½½è¯·æ³¨æ¥æº
    * åŸç”¨äºBloxdæœåŠ¡å™¨ é£äº‘é™…ä¼š ä¸­ã€‚
    * ä»£ç æœ‰å‚è€ƒæ­»ç¥æ°¸ç”ŸæœåŠ¡å™¨
*/

const purple = "#ac73ff", blue = "#aca8ff", cyan = "#9de5ff", sky = "#d5fdff", red = "#ff4d4d", orange = "#ff8364", gold = "#fdb87d", yellow = "#ffe8d5", mint = "#d7fbe8", grass = "#9df3c4", green = "#62d2a2", jungle = "#1fab89";
const owner = 'The_DarkForest';

//å»ºé€ å·¨å‹æ¥¼æ¢¯ç›¸å…³ä»£ç 
const W = 10, P = 5; // æ¥¼æ¢¯å®½åº¦(zæ–¹å‘)ï¼Œå•é˜¶é•¿åº¦(xæ–¹å‘)
const stx = 1000, sty = 0, stz = 1000; // èµ·å§‹ä½ç½®
var L = 1000;
function xz2Height(x, z) {
    if((x < stx) || (z < stz) || (z > stz+P)) return 0;
    return Math.floor((x - stx) / P)+1;
}
function getRandomX(){
    x = Math.floor(Math.random() * L);
    return stx + x + 5;
}

// æ¥¼æ¢¯ä¸­çš„æ–¹å—ä¼šéšæœºæ¶ˆå¤±ï¼Œæ¶ˆå¤±å‰ä¼šå˜è‰²ï¼Œè®©ç©å®¶æœ‰æ—¶é—´é€ƒç¦»æ­¤æ–¹å—
// å˜è‰²ç›®å‰é»˜è®¤ Light Blue -> Yellow -> Redï¼Œä»¥ååŠ æ›´ä¸°å¯Œçš„é¢œè‰²
// const h2color = [["", "", ""], ["", "", ""], ["", "", ""], ["", "", ""], ["", "", ""], ["", "", ""]];

var changingBlocks = []; // è®°å½•æ­£åœ¨å˜è‰²çš„æ–¹å—
const ticks2Disappear = 40;
var curBlock = 0;
var T = 0;

var rank = [];
var extras = [];

tick = () => {
    T = (T + 1) % 10000;
    // 1.éšæœºæ‰¾ä¸€ä¸ªæ¥¼æ¢¯ä¸Šçš„æ­£å¸¸æ–¹å—ï¼Œå¼€å§‹å˜è‰²
    // 2.æ›´æ–°æ‰€æœ‰æ­£åœ¨å˜è‰²çš„æ–¹å—
    // 3.éšæœºæ‰¾ä¸€ä¸ªæ¥¼æ¢¯ä¸Šçš„ç©ºæ°”æ–¹å—ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ­£å¸¸æ–¹å—
    // å¦‚ä½•ä¿è¯æ¯æ¬¡æ¶ˆå¤±å’Œè¡¥å……çš„æ•°é‡å¤§è‡´ç›¸ç­‰ï¼Ÿ

    if (true) {
        for(let i = 0;i < 10;i++){
            const rx = getRandomX();
            const rz = Math.floor(Math.random() * P) + stz;
            const ry = xz2Height(rx, rz);
            if (ry > 0) {
                const blockType = api.getBlock(rx, ry, rz);
                if (blockType === 'Light Blue Concrete') {
                    changingBlocks.push({ x: rx, y: ry, z: rz, stage: 0 });
                    api.setBlock(rx, ry, rz, 'Yellow Concrete');
                }
            }
        }
    }
    for (let i = changingBlocks.length - 1; i >= 0; i--) {
        const block = changingBlocks[i];
        block.stage += 1;
        if (block.stage === Math.floor(ticks2Disappear/2)) {
            api.setBlock(block.x, block.y, block.z, 'Red Concrete');
        } else if (block.stage === ticks2Disappear) {
            api.setBlock(block.x, block.y, block.z, 'Air');
            changingBlocks.splice(i, 1);
        }
    }
    if (true) {
        for(let i = 0;i < 10;i++){
            const rx = getRandomX();
            const rz = Math.floor(Math.random() * P) + stz;
            const ry = xz2Height(rx, rz);
            const blockType = api.getBlock(rx, ry, rz);
            if (blockType === 'Air') {
                api.setBlock(rx, ry, rz, 'Light Blue Concrete');
            }
            // å¦‚æœæ˜¯å…¶ä»–é¢œè‰²ï¼Œä½†ä¸åœ¨å˜è‰²åˆ—è¡¨ä¸­ï¼Œä¹Ÿè¡¥å……ä¸ºæ­£å¸¸æ–¹å—
            else if (blockType !== 'Light Blue Concrete') {
                let isChanging = false;
                for (const b of changingBlocks) {
                    if (b.x === rx && b.y === ry && b.z === rz) {
                        isChanging = true;
                        break;
                    }
                }
                if (!isChanging) {
                    api.setBlock(rx, ry, rz, 'Light Blue Concrete');
                }
            }
        }
    }

    // ç©å®¶ç›¸å…³ï¼š
    // 1.ç©å®¶æ’å
    // 2.æ‰è½ï¼ˆy=1ï¼‰åä¼ é€å›èµ·ç‚¹
    // ä¸¤è€…å‡åœ¨tickä¸­ä»¥ä¸€å®šé—´éš”éå†åˆ·æ–°

    if (T % 20 === 0) {
        rank = [];
        const ids = api.getPlayerIds()
        for (const id of ids) {
            const pos = api.getPosition(id);
            const y = Math.floor(pos[1]);
            if (y <= 1) {
                // å¦‚æœæœ‰moonstoneï¼Œä¼ é€åˆ°æ­¤x zå¯¹åº”çš„é«˜åº¦
                const moonstoneCount = api.getInventoryItemAmount(id, "Moonstone");
                if (moonstoneCount > 0) {
                    const rx = pos[0];
                    const rz = pos[2];
                    const ry = xz2Height(rx, rz);
                    api.setPosition(id, [rx, ry + 2, rz]);
                    api.setBlock(rx, ry, rz, "Light Blue Concrete");
                    api.removeItemName(id, "Moonstone", 1);
                    continue;
                }
                // å¦‚æœæœ‰ Diamondï¼Œä¼ é€åˆ°æ­¤xå‡åŠ zå‡åŠå¯¹åº”çš„é«˜åº¦çš„ä½ç½®
                const diamondCount = api.getInventoryItemAmount(id, "Diamond");
                if (diamondCount > 0) {
                    const deathX = pos[0]; // ç©å®¶æ­»äº¡æ—¶çš„xåæ ‡
                    const deathZ = pos[2];
                    const halfX = stx + (deathX - stx) / 2;
                    const ry = xz2Height(halfX, deathZ);
                    const safeX = Math.max(stx + P, halfX);
                    api.setPosition(id, [safeX, ry + 2, deathZ]);
                    api.removeItemName(id, "Diamond", 1);
                }
                else {
                    api.setPosition(id, [stx + 0.5, sty + 2, stz + P / 2 + 0.5]);
                }
            }
            // åœ¨rankä¸­æ’å…¥è¿™ä¸ªç©å®¶çš„åå­—å’Œé«˜åº¦
            const name = api.getEntityName(id);
            rank.push({ name: name, height: y });
        }
        // æ ¹æ®é«˜åº¦æ’åº
        rank.sort((a, b) => b.height - a.height);
        var string = "é«˜åº¦æ’åï¼š\n";
        for (var i = 0; i < rank.length; i++) {
            const playerName = rank[i].name;
            const playerHeight = rank[i].height;
            string += `${parseInt(i+1)}. ${playerName} , ${playerHeight}m\n`;
        }
        string += `\nè¾“å…¥ #help æŸ¥çœ‹å‘½ä»¤åˆ—è¡¨`;
        //éå†ç©å®¶
        for (const id of ids) {
            api.setClientOption(id, "RightInfoText", [
                {str: string, style: {color: sky}}
            ]);
        }
    }

    // å¥–åŠ±æœºåˆ¶è®¾å®šï¼š
    // é¦–å…ˆåˆ¤æ–­ç©å®¶ä¸ºOriginalæˆ–Extraæ¨¡å¼ï¼Œåªæœ‰Extraæ¨¡å¼äº«å—å¥–åŠ±
    // ç©å®¶å¯éšæ—¶é€šè¿‡è¾“å…¥ #mode original æˆ– #mode extra åˆ‡æ¢æ¨¡å¼ï¼Œç©å®¶æ¨¡å¼çŠ¶æ€å­˜å‚¨åœ¨extrasä¸­
    // æ¯100tickèµ é€ä¸€æ¬¡ç¤¼ç‰©
    // ç»™ç¬¬ä¸€çš„ç©å®¶èµ é€Moonstoneï¼Œç»™ç¬¬äºŒçš„ç©å®¶èµ é€Diamondï¼Œä½†ä¸€ä¸ªäººåœ¨åŒä¸€æ—¶é—´æ‹¥æœ‰çš„Moonstoneæˆ–Diamondæ•°é‡ä¸Šé™ä¸º3
    // ç»™ä½äºæ’åä¸­é—´çš„ç©å®¶èµ é€Iron Barï¼Œæ•°é‡æ— ä¸Šé™
    // éšæœºç»™ä¸€ä¸ªç©å®¶èµ é€Coalï¼Œæ•°é‡æ— ä¸Šé™
    // Moonston:é‡ç”Ÿåˆ°ä¸Šæ¬¡æ­»çš„åœ°æ–¹ Diamond:é‡ç”Ÿåˆ°ä¸Šæ¬¡æ­»çš„åœ°æ–¹çš„ä¸€åŠ Iron Bar:ä¼ é€åˆ°å°é˜¶ä¸Šéšæœºä½ç½® Coal:æœ‰50%æ¦‚ç‡æ€æ­»è‡ªå·±ï¼Œæœ‰50%æ¦‚ç‡ä¼ é€åˆ°ä¸¤å€çš„é«˜åº¦
    if (T % 1000 === 0) {
        // æŒ‰ç…§åœ¨rankä¸­çš„é¡ºåºï¼Œç­›é€‰å‡ºextrasä¸­çš„ç©å®¶
        const extraPlayers = [];
        for (const r of rank) {
            const p = extras.find(p => p.name === r.name);
            if (p) {
                extraPlayers.push(p);
            }
        }
        if (extraPlayers.length === 0) return;
        // ç¬¬ä¸€åï¼ˆä¼˜å…ˆä½¿ç”¨å·²å­˜çš„ idï¼Œè‹¥ä¸å­˜åœ¨å†å°è¯•é€šè¿‡ name æŸ¥æ‰¾ï¼‰
        const firstPlayer = extraPlayers[0];
        const firstId = firstPlayer?.id ?? api.getPlayerId(firstPlayer?.name);
        if (firstId) {
            const firstMoonstoneCount = api.getInventoryItemAmount(firstId, "Moonstone");
            if (firstMoonstoneCount < 3) {
                api.giveItem(firstId, "Moonstone", 1, {customDisplayName: "å¹¿å¯’å®«ä¹‹å¿ƒ", customDescription: "ä»·å€¼ä¸€æ¡å‘½(ä¸‹æ¬¡ç›´æ¥ä»æ­»çš„åœ°æ–¹ç»§ç»­"});
            }
        }
        // ç¬¬äºŒå
        if (extraPlayers.length >= 2) {
            const secondPlayer = extraPlayers[1];
            const secondId = secondPlayer?.id ?? api.getPlayerId(secondPlayer?.name);
            if (secondId) {
                const secondDiamondCount = api.getInventoryItemAmount(secondId, "Diamond");
                if (secondDiamondCount < 3) {
                    api.giveItem(secondId, "Diamond", 1, {customDisplayName: "å’Œç”°ç‰", customDescription: "ä»·å€¼åŠæ¡å‘½(ä¸‹æ¬¡ä»æ­»å‰ä½ç½®çš„ä¸€åŠç»§ç»­"});
                }
            }
        }
        // ä¸­é—´åæ¬¡ç©å®¶
        const middleIndex = Math.floor(extraPlayers.length / 2);
        const middlePlayer = extraPlayers[middleIndex];
        const middleId = middlePlayer?.id ?? api.getPlayerId(middlePlayer?.name);
        if (middleId) {
            api.giveItem(middleId, "Iron Bar", 1, {customDisplayName: "æœ«æ—¥ä¹‹æˆ˜æˆ˜èˆ°ç¢ç‰‡", customDescription: "è¾“å…¥#ibä½¿ç”¨ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼ é€åˆ°æ¢¯å­ä¸Šéšæœºä½ç½®"});
        }
        // éšæœºç©å®¶
        const randomIndex = Math.floor(Math.random() * extraPlayers.length);
        const randomPlayer = extraPlayers[randomIndex];
        const randomId = randomPlayer?.id ?? api.getPlayerId(randomPlayer?.name);
        if (randomId) {
            api.giveItem(randomId, "Coal", 1, {customDisplayName: "è–›å®šè°”ç„æ­¦å²©", customDescription: "è¾“å…¥#cä½¿ç”¨ï¼Œ50%æ¦‚ç‡æ€æ­»è‡ªå·±ï¼Œ50%æ¦‚ç‡ä¼ é€åˆ°ä¸¤å€é«˜åº¦"});
        }
    }
    L = Math.max(L, rank[0]?.height*P + 100 || 300);
}

onPlayerJoin = (playerId) => {
    user = api.getEntityName(playerId);
    api.broadcastMessage((user + ' å¤§è›‡ï¼Œæ¬¢è¿å…‰ä¸´'), { color: "#daf4f5" });
    api.broadcastMessage((user + ', welcome to Bloxd'), { color: "#c4dce0" });
    api.broadcastMessage('äººæ•°ä¸º' + api.getNumPlayers(), { color: "#abcecf" });
    api.setClientOption(playerId,'skyBox','interstellar')
    api.sendMessage(playerId, "ä¸€ç›´å¾€å‰èµ°ã€‚é˜¶æ¢¯é•¿è¾¾ç†è®ºä¸Šæ— é™é•¿ã€‚è·¯ä¸Šçš„æ–¹å—ä¼šéšæœºå˜çº¢ï¼Œç„¶åæ¶ˆå¤±ã€‚è¯·ä¸è¦æ‰ä¸‹å»ã€‚\n\nè¾“å…¥ #x å¼€å¯å¥–åŠ±\nè¾“å…¥ #help æŸ¥çœ‹å¸®åŠ©ã€‚", { color: grass})
    api.sendMessage(playerId, "Keep going forward. The stair is very long. The blocks on the way will randomly turn red and then disappear. Please don't fall down.", { color: mint})
}

// å½“ç©å®¶ç¦»å¼€æ—¶æ¸…ç† extrasï¼Œé¿å…å­˜ç•™å·²ä¸‹çº¿ç©å®¶çš„ name å¯¼è‡´é€šè¿‡ name æŸ¥ id è¿”å› null
onPlayerLeave = (playerId) => {
    extras = extras.filter(p => p.id !== playerId);
}

onPlayerChat = (playerId, chatMessage) => {
    const args = chatMessage.split(/\s+/);
    const cmd = args[0].toLowerCase();
    if (cmd === "#mode" && args[1] === "original" || cmd === "#o") {
        // å¦‚æœåœ¨extrasä¸­ï¼Œç§»é™¤è¯¥ç©å®¶ï¼ˆä½¿ç”¨ id ä½œä¸ºå”¯ä¸€æ ‡è¯†ä»¥é¿å… name ä¸ç¦»çº¿é—®é¢˜ï¼‰
        extras = extras.filter(p => p.id !== playerId);
        api.sendMessage(playerId, "ä½ å·²åˆ‡æ¢åˆ°Originalæ¨¡å¼ï¼Œå°†ä¸äº«å—å¥–åŠ±ã€‚", { color: orange });
        api.clearInventory(playerId);
    }
    else if (cmd === "#mode" && args[1] === "extra" || cmd === "#x") {
        // è®¾ç½®ç©å®¶ä¸ºExtraæ¨¡å¼ï¼ˆå­˜ id ä¸ nameï¼‰
        const playerName = api.getEntityName(playerId);
        if (!extras.find(p => p.id === playerId)) {
            extras.push({ id: playerId, name: playerName });
        }
        api.sendMessage(playerId, "ä½ å·²åˆ‡æ¢åˆ°Extraæ¨¡å¼ï¼Œå°†äº«å—å¥–åŠ±ã€‚", { color: grass });
    }
    else if (cmd === "#view" && args[1] === "players") {
        //æ‰€æœ‰ç©å®¶å’Œæ­¤æ—¶çš„æ¨¡å¼
        let message = "å½“å‰æ‰€æœ‰ç©å®¶æ¨¡å¼ï¼š\n";
        const ids = api.getPlayerIds();
        for (const id of ids) {
            const name = api.getEntityName(id);
            const mode = extras.find(p => p.id === id) ? "Extra" : "Original";
            message += `${name} : ${mode}\n`;
        }
        api.sendMessage(playerId, message, { color: sky } );
    }
    else if (cmd === "#use" && args[1] === "coal" || cmd === "#c") {
        if (api.getInventoryItemAmount(playerId, "Coal") <= 0) {
            api.sendMessage(playerId, "ä½ æ²¡æœ‰Coalï¼Œæ— æ³•ä½¿ç”¨ã€‚", { color: red });
            return;
        }
        const chance = Math.random();
        if (chance < 0.5) {
            api.killLifeform(playerId, { lifeformId: playerId, withItem: "Coal" })
            api.sendMessage(playerId, "ä½ ä½¿ç”¨äº†Coalï¼Œä½†ä¸å¹¸è¢«æ€æ­»äº†ã€‚", { color: red });
        }
        else {
            const pos = api.getPosition(playerId);
            const newX = (pos[0]-stx)*2+stx;
            const newY = xz2Height(newX, pos[2]) + 2;;
            api.setPosition(playerId, [newX, newY, pos[2]]);
            if(api.getBlock(newX, newY-1, pos[2]) === 'Air'){
                api.setBlock(newX, newY-1, pos[2], "Light Blue Concrete");
            }
            api.sendMessage(playerId, "ä½ ä½¿ç”¨äº†Coalï¼Œä¼ é€åˆ°äº†ä¸¤å€çš„é«˜åº¦ã€‚", { color: mint });
        }
        api.removeItemName(playerId, "Coal", 1)
    }
    else if (cmd === "#use" && args[1] === "ironbar" || cmd === "#ib") {
        if (api.getInventoryItemAmount(playerId, "Iron Bar") <= 0) {
            api.sendMessage(playerId, "ä½ æ²¡æœ‰Iron Barï¼Œæ— æ³•ä½¿ç”¨ã€‚", { color: red });
            return;
        }
        const rx = getRandomX() + 0.5;
        const rz = Math.floor(Math.random() * P) + stz + 0.5;
        const ry = xz2Height(rx, rz) + 1;
        api.setPosition(playerId, [rx, ry, rz]);
        api.sendMessage(playerId, "ä½ ä½¿ç”¨äº†Iron Barï¼Œä¼ é€åˆ°äº†å°é˜¶ä¸Šçš„éšæœºä½ç½®ã€‚", { color: mint });
        api.removeItemName(playerId, "Iron Bar", 1)
    }  
    else if (cmd === "#help" && args[1] === "awards") {
        let message = " =X= å¥–åŠ±æœºåˆ¶è¯´æ˜ =X=\n";
        message += "åªæœ‰Extraæ¨¡å¼çš„ç©å®¶æ‰äº«å—å¥–åŠ±ï¼ŒOriginalæ¨¡å¼çš„ç©å®¶ä¸äº«å—å¥–åŠ±ã€‚\n";
        message += "æ¯1000tickï¼Œç³»ç»Ÿä¼šæ ¹æ®å½“å‰æ’åå‘æ”¾å¥–åŠ±ï¼š\n";
        message += "ç¬¬ä¸€åè·å¾—Moonstoneï¼ˆä¸Šæ¬¡æ­»äº¡ä½ç½®é‡ç”Ÿï¼‰ï¼Œä¸Šé™3ä¸ª\n";
        message += "ç¬¬äºŒåè·å¾—Diamondï¼ˆä¸Šæ¬¡æ­»äº¡ä½ç½®ä¸€åŠå¤„é‡ç”Ÿï¼‰ï¼Œä¸Šé™3ä¸ª\n";
        message += "ä¸­é—´åæ¬¡ç©å®¶è·å¾—Iron Barï¼ˆä¼ é€åˆ°å°é˜¶ä¸Šéšæœºä½ç½®ï¼‰ï¼Œæ— ä¸Šé™\n";
        message += "éšæœºç©å®¶è·å¾—Coalï¼ˆ50%æ¦‚ç‡æ€æ­»è‡ªå·±ï¼Œ50%æ¦‚ç‡ä¼ é€åˆ°ä¸¤å€é«˜åº¦ï¼‰ï¼Œæ— ä¸Šé™\n";
        api.sendMessage(playerId, message, { color: sky } );
    }
    else if (cmd === "#help" || cmd === "#h") {
        let message = "å‘½ä»¤åˆ—è¡¨ï¼š\n";
        message += "#mode original - åˆ‡æ¢åˆ°Originalæ¨¡å¼ï¼Œä¸äº«å—å¥–åŠ±ï¼Œå¯ç®€å†™ #o\n";
        message += "#mode extra - åˆ‡æ¢åˆ°Extraæ¨¡å¼ï¼Œäº«å—å¥–åŠ±ï¼Œå¯ç®€å†™ #x\n";
        message += "#view players - æŸ¥çœ‹å½“å‰æ‰€æœ‰ç©å®¶çš„æ¨¡å¼\n";
        message += "#use coal - ä½¿ç”¨Coalï¼Œæœ‰50%æ¦‚ç‡æ€æ­»è‡ªå·±ï¼Œ50%æ¦‚ç‡ä¼ é€åˆ°ä¸¤å€é«˜åº¦ï¼Œå¯ç®€å†™ #c\n";
        message += "#use ironbar - ä½¿ç”¨Iron Barï¼Œä¼ é€åˆ°å°é˜¶ä¸Šçš„éšæœºä½ç½®ï¼Œå¯ç®€å†™ #ib\n";
        message += "#help awards - æŸ¥çœ‹å‘½ä»¤åˆ—è¡¨\n";
        api.sendMessage(playerId, message, { color: sky } );
    }

    else{
        if(chatMessage.startsWith("#")){
        api.sendMessage(playerId, "æœªçŸ¥å‘½ä»¤ã€‚è¾“å…¥ #help æŸ¥çœ‹å‘½ä»¤åˆ—è¡¨ã€‚", { color: orange });
        }
    }

    if (chatMessage.startsWith("#")) {
        return false; // é˜»æ­¢å‘½ä»¤è¢«å…¶ä»–åœ°æ–¹å¤„ç†
    }
};
```
-----
## ä»£ç è§£é‡Š

> ç”±Deepseekç”Ÿæˆ

è¿™æ˜¯ä¸€ä¸ª**æ— é™æ¥¼æ¢¯æ¸¸æˆæ¨¡å¼**çš„å®Œæ•´å®ç°ä»£ç ã€‚è®©æˆ‘è¯¦ç»†è§£é‡Šå®ƒçš„åŠŸèƒ½å’Œæœºåˆ¶ï¼š

### ğŸ® æ ¸å¿ƒæ¸¸æˆæ¦‚å¿µ

è¿™æ˜¯ä¸€ä¸ª**æ— é™å»¶ä¼¸çš„æ¥¼æ¢¯å¹³å°æ¸¸æˆ**ï¼Œç©å®¶éœ€è¦ä¸æ–­å‰è¿›ï¼ŒåŒæ—¶é¿å…ä»æ¶ˆå¤±çš„æ–¹å—ä¸Šæ‰è½ã€‚

### æŠ€æœ¯æ¶æ„

#### 1. **æ¥¼æ¢¯ç”Ÿæˆç³»ç»Ÿ**
```javascript
const W = 10, P = 5; // æ¥¼æ¢¯å®½åº¦10æ ¼ï¼Œæ¯é˜¶é•¿åº¦5æ ¼
const stx = 1000, sty = 0, stz = 1000; // èµ·å§‹åæ ‡
var L = 1000; // æ¥¼æ¢¯æ€»é•¿åº¦ï¼ˆåŠ¨æ€æ‰©å±•ï¼‰

function xz2Height(x, z) {
    // æ ¹æ®x,zåæ ‡è®¡ç®—å°é˜¶é«˜åº¦
    return Math.floor((x - stx) / P)+1;
}
```

#### 2. **æ–¹å—æ¶ˆå¤±æœºåˆ¶**
```javascript
var changingBlocks = []; // è·Ÿè¸ªå˜è‰²ä¸­çš„æ–¹å—
const ticks2Disappear = 40; // 40tickåæ¶ˆå¤±
```
**å˜è‰²æµç¨‹**ï¼š
- æ­£å¸¸æ–¹å—ï¼ˆæµ…è“ï¼‰â†’ é»„è‰² â†’ çº¢è‰² â†’ æ¶ˆå¤±
- ç»™ç©å®¶2ç§’ååº”æ—¶é—´é€ƒç¦»å±é™©æ–¹å—

### æ¸¸æˆæ ¸å¿ƒå¾ªç¯

#### `tick()` å‡½æ•° - æ¯ç§’20æ¬¡æ‰§è¡Œ

##### **æ–¹å—ç®¡ç†**ï¼š
```javascript
// 1. éšæœºé€‰æ‹©10ä¸ªæ­£å¸¸æ–¹å—å¼€å§‹å˜è‰²
// 2. æ›´æ–°æ‰€æœ‰å˜è‰²æ–¹å—çš„çŠ¶æ€
// 3. éšæœºå†ç”Ÿ10ä¸ªç©ºæ°”æ–¹å—
```

##### **ç©å®¶æ’åç³»ç»Ÿ**ï¼š
```javascript
if (T % 20 === 0) { // æ¯ç§’æ›´æ–°ä¸€æ¬¡æ’å
    rank = [];
    // æ”¶é›†æ‰€æœ‰ç©å®¶ä½ç½®ï¼ŒæŒ‰é«˜åº¦æ’åº
    rank.sort((a, b) => b.height - a.height);
    // åœ¨å³ä¾§ä¿¡æ¯æ æ˜¾ç¤ºå®æ—¶æ’å
}
```

### å¥–åŠ±ç‰©å“ç³»ç»Ÿ

#### **ä¸¤ç§æ¸¸æˆæ¨¡å¼**ï¼š
- **Originalæ¨¡å¼**ï¼šçº¯æŠ€æœ¯ç©æ³•ï¼Œæ— å¥–åŠ±
- **Extraæ¨¡å¼**ï¼šäº«å—å¥–åŠ±ç³»ç»Ÿ

#### **å¥–åŠ±ç‰©å“åŠŸèƒ½**ï¼š

| ç‰©å“ | è·å–æ¡ä»¶ | åŠŸèƒ½ | å¯“æ„ |
|------|----------|------|------|
| Moonstone | æ’åç¬¬ä¸€ | æ­»äº¡ä½ç½®é‡ç”Ÿ | é˜¶çº§å›ºåŒ– |
| Diamond | æ’åç¬¬äºŒ | æ­»äº¡ä½ç½®ä¸€åŠé«˜åº¦é‡ç”Ÿ | æœ‰é™ä¸Šå‡æœºä¼š |
| Iron Bar | ä¸­é—´åæ¬¡ | éšæœºä¼ é€ | ä¸­äº§é˜¶çº§æµåŠ¨ |
| Coal | éšæœºè·å¾— | 50%æ­»äº¡/50%åŒå€é«˜åº¦ | é«˜é£é™©èµŒåš |

### ç©å®¶å‘½ä»¤ç³»ç»Ÿ

#### **æ¨¡å¼åˆ‡æ¢**ï¼š
```javascript
#mode original / #o  // åˆ‡æ¢åˆ°æ— å¥–åŠ±æ¨¡å¼
#mode extra / #x     // åˆ‡æ¢åˆ°å¥–åŠ±æ¨¡å¼
```

#### **ç‰©å“ä½¿ç”¨**ï¼š
```javascript
#use coal / #c       // ä½¿ç”¨Coal - å‘½è¿èµŒåš
#use ironbar / #ib   // ä½¿ç”¨Iron Bar - éšæœºä¼ é€
```

#### **ä¿¡æ¯æŸ¥è¯¢**ï¼š
```javascript
#view players        // æŸ¥çœ‹æ‰€æœ‰ç©å®¶æ¨¡å¼
#help awards         // å¥–åŠ±æœºåˆ¶è¯´æ˜
#help / #h          // å®Œæ•´å‘½ä»¤åˆ—è¡¨
```

### å…³é”®æŠ€æœ¯ç‰¹æ€§

#### 1. **åŠ¨æ€ä¸–ç•Œæ‰©å±•**
```javascript
L = Math.max(L, rank[0]?.height*P + 100 || 300);
```
æ¥¼æ¢¯æ ¹æ®æœ€é«˜ç©å®¶ä½ç½®è‡ªåŠ¨å»¶é•¿ï¼Œç¡®ä¿æ— é™æ¸¸æˆä½“éªŒã€‚

#### 2. **æ‰è½ä¿æŠ¤æœºåˆ¶**
```javascript
if (y <= 1) { // ç©å®¶æ‰è½åˆ°åœ°é¢
    // æ£€æŸ¥æ˜¯å¦æœ‰å¤æ´»ç‰©å“
    // å¦åˆ™ä¼ é€å›èµ·ç‚¹
}
```

#### 3. **å¥–åŠ±å‘æ”¾é€»è¾‘**
```javascript
if (T % 1000 === 0) { // æ¯50ç§’å‘æ”¾ä¸€æ¬¡å¥–åŠ±
    // æ ¹æ®å®æ—¶æ’åå‘Extraç©å®¶å‘æ”¾å¯¹åº”å¥–åŠ±
}
```

### ç”¨æˆ·ä½“éªŒè®¾è®¡

#### **è§†è§‰ç³»ç»Ÿ**ï¼š
- **å½©è‰²æ¶ˆæ¯**ï¼šä¸åŒåŠŸèƒ½ä½¿ç”¨ä¸åŒé¢œè‰²
- **æ˜Ÿé™…å¤©ç©ºç›’**ï¼šè¥é€ æ— é™ç©ºé—´æ„Ÿ
- **å®æ—¶æ’å**ï¼šå³ä¾§ä¿¡æ¯æ æŒç»­æ›´æ–°

#### **å¤šè¯­è¨€æ”¯æŒ**ï¼š
```javascript
api.sendMessage(playerId, "ä¸­æ–‡è¯´æ˜...", { color: grass})
api.sendMessage(playerId, "English explanation...", { color: mint})
```

## ğŸŒŸ è®¾è®¡å“²å­¦

è¿™ä¸ªæ¸¸æˆä½“ç°äº†**ç¤¾ä¼šé˜¶çº§çš„éšå–»**ï¼š
- **Moonstone**ï¼šä¸Šå±‚é˜¶çº§çš„ç‰¹æƒç»§æ‰¿
- **Diamond**ï¼šæœ‰é™çš„ä¸Šå‡é€šé“  
- **Coal**ï¼šåº•å±‚çš„é£é™©å†³ç­–ç”šè‡³èµŒåš
- **æ— é™ç«äº‰**ï¼šåæ˜ ç°å®ç¤¾ä¼šçš„æŒç»­ç«äº‰

è¿™æ˜¯ä¸€ä¸ªè®¾è®¡ç²¾å·§çš„å¹³å°æ¸¸æˆï¼Œç»“åˆäº†æŠ€æœ¯æŒ‘æˆ˜ã€èµ„æºç®¡ç†å’Œæ·±åˆ»çš„ç¤¾ä¼šéšå–»ï¼Œä¸ºç©å®¶æä¾›äº†ä¸°å¯Œçš„æ¸¸æˆä½“éªŒã€‚
